{"remainingRequest":"D:\\项目\\movie\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\movie\\vue-admin\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\项目\\movie\\vue-admin\\src\\views\\Login.vue","mtime":1617183298934},{"path":"D:\\项目\\movie\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\movie\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge0xvZ2lufSBmcm9tICJAL2FwaS91c2VyIgoKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICAgICAgcm9sZTogJycsCiAgICAgICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgICAgICByZW1lbWJlcjogZmFsc2UsCiAgICAgICAgICAgIHVzZXJuYW1lRXJyb3I6IGZhbHNlLAogICAgICAgICAgICBwYXNzd29yZEVycm9yOiBmYWxzZSwKICAgICAgICAgICAgcm9sZUVycm9yOiBmYWxzZSwKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHBvc3RMb2dpbigpIHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgTG9naW5EYXRhID0gewogICAgICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgICAgICAgICAgIHJlbWVtYmVyOiB0aGlzLnJlbWVtYmVyLAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaWYgKExvZ2luRGF0YS51c2VybmFtZS5sZW5ndGggPD0gNSkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VybmFtZUVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0sIDcwMCkKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy51c2VybmFtZUVycm9yID0gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChMb2dpbkRhdGEucGFzc3dvcmQubGVuZ3RoIDw9IDUpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmRFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICB9LCA3MDApCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmRFcnJvciA9IGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIXRoaXMucm9sZSkgewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb2xlRXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgfSwgNzAwKQogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnJvbGVFcnJvciA9IGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBMb2dpbih0aGlzLnJvbGUsIExvZ2luRGF0YSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgaWYgKCFyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9LCA3MDApCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAvL+eZu+mZhuaIkOWKnwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgcmVzLmRhdGEudG9rZW4pCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvbGUgPT09ICd3b3JrZXInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgid2lkIiwgcmVzLmRhdGEud29ya2VyLmlkKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJyb2xlIiwgdGhpcy5yb2xlKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0sIDcwMCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"login\">\n        <div class=\"login-form\">\n            <div class=\"login-form-header\">\n                <img style=\"width: 75px; height: 75px;float: left;padding-right: 30px;\" src=\"../assets/img/logo.png\"\n                     alt=\"\"/>\n                <div class=\"login-form-text\">小小影院 - 后台管理</div>\n            </div>\n            <div style=\"color: #91949c;font-weight: bolder\">\n\n                <p>Username</p>\n                <el-input class=\"login-form-input\" v-model=\"username\" placeholder=\"账 号\"></el-input>\n                <el-alert\n                        v-if=\"usernameError\"\n                        title=\"请您输入不少于6位的用户名\"\n                        type=\"error\"\n                        show-icon>\n                </el-alert>\n\n                <p>Password</p>\n                <el-input class=\"login-form-input\" placeholder=\"密 码\" v-model=\"password\" show-password></el-input>\n                <el-alert\n                        v-if=\"passwordError\"\n                        title=\"请您输入不少于6位的密码\"\n                        type=\"error\"\n                        show-icon>\n                </el-alert>\n\n                <p>Role</p>\n                <el-select style=\"width: 100%\" class=\"login-form-input\" v-model=\"role\" placeholder=\"请选择你的身份\">\n                    <el-option label=\"系统管理员\" value=\"admin\"></el-option>\n                    <el-option label=\"工作人员\" value=\"worker\"></el-option>\n                </el-select>\n                <el-alert\n                        v-if=\"roleError\"\n                        title=\"请您选择登入的身份\"\n                        type=\"error\"\n                        show-icon>\n                </el-alert>\n\n                <div style=\"padding-top: 10px\">\n                    <el-checkbox v-model=\"remember\">记住密码</el-checkbox>\n                    <div style=\"float: right\">\n                        <el-tooltip class=\"item\" effect=\"dark\" content=\"请联系管理员修改\" placement=\"bottom\">\n                            <el-link style=\"font-weight: bolder;font-size: 14px;color: #91949c;\"\n                                     :underline=\"false\">\n                                忘记密码?\n                            </el-link>\n                        </el-tooltip>\n                    </div>\n                </div>\n                <el-button :loading=\"loading\" @click=\"postLogin\" class=\"login-form-button\" type=\"primary\">SIGN IN\n                </el-button>\n            </div>\n            <div class=\"login-form-footer\">\n                <div style=\"font-weight: bolder;font-size: 16px;color: #91949c;\"\n                     :underline=\"false\">\n                    Copyright 2021 小小影院 - 后台管理\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\n    import {Login} from \"@/api/user\"\n\n    export default {\n        data() {\n            return {\n                loading: false,\n                role: '',\n                username: '',\n                password: '',\n                remember: false,\n                usernameError: false,\n                passwordError: false,\n                roleError: false,\n            }\n        },\n        methods: {\n            postLogin() {\n                this.loading = true;\n                const LoginData = {\n                    username: this.username,\n                    password: this.password,\n                    remember: this.remember,\n                };\n\n                if (LoginData.username.length <= 5) {\n                    setTimeout(() => {\n                        this.loading = false;\n                        this.usernameError = true;\n                    }, 700)\n                    return\n                } else {\n                    this.usernameError = false;\n                }\n\n                if (LoginData.password.length <= 5) {\n                    setTimeout(() => {\n                        this.loading = false;\n                        this.passwordError = true;\n                    }, 700)\n                    return\n                } else {\n                    this.passwordError = false;\n                }\n\n                if (!this.role) {\n                    setTimeout(() => {\n                        this.loading = false;\n                        this.roleError = true;\n                    }, 700)\n                    return\n                } else {\n                    this.roleError = false;\n                }\n\n                Login(this.role, LoginData).then(res => {\n                    if (!res.success) {\n                        setTimeout(() => {\n                            this.loading = false;\n                        }, 700)\n                    } else {\n                        setTimeout(() => {\n                            //登陆成功\n                            console.log(res.data)\n                            localStorage.setItem(\"token\", res.data.token)\n                            if (this.role === 'worker') {\n                                localStorage.setItem(\"wid\", res.data.worker.id)\n                            }\n                            localStorage.setItem(\"role\", this.role)\n                            this.$router.push(\"/\")\n                            this.loading = false;\n                        }, 700)\n                    }\n                })\n\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n    .login {\n        width: 100%;\n        height: 100%;\n        background: #FFFFFF;\n    }\n\n    .login-form {\n        width: 500px;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        letter-spacing: 2px;\n    }\n\n    .login-form-header {\n        height: 20px;\n        padding-left: 40px;\n        padding-bottom: 100px;\n    }\n\n    .login-form-text {\n        color: #000000;\n        font-weight: bold;\n        font-size: 30px;\n        padding-top: 15px;\n    }\n\n    .login-form-input {\n        margin-bottom: 10px;\n    }\n\n    .login-form-button {\n        border-radius: 3px;\n        width: 100%;\n        font-weight: 600;\n        font-size: 15px;\n        letter-spacing: 2px;\n        height: 60px;\n        background: #5a84fd;\n        box-shadow: 0 5px 30px rgb(0 66 8.5%);\n        margin-top: 35px;\n    }\n\n    .login-form-footer {\n        font-weight: bolder;\n        color: #91949c;\n        padding-top: 40px;\n        text-align: center;\n    }\n\n    >>> .el-input__inner {\n        height: 48px;\n    }\n\n    .el-checkbox {\n        color: #91949c;\n        font-weight: bolder;\n        font-size: 15px;\n    }\n\n</style>\n"]}]}