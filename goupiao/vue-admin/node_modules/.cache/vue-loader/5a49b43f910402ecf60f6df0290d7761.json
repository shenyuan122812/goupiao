{"remainingRequest":"D:\\项目\\movie\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\movie\\vue-admin\\src\\views\\Setting.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\项目\\movie\\vue-admin\\src\\views\\Setting.vue","mtime":1617355439683},{"path":"D:\\项目\\movie\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\movie\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjb25maWcgZnJvbSAiQC9jb25maWciOwppbXBvcnQge0ZpbmRXb3JrZXJCeUlkLCBVcGRhdGVXb3JrZXJ9IGZyb20gIkAvYXBpL3dvcmtlciI7CgpleHBvcnQgZGVmYXVsdCB7CgogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBoZWFkZXI6IHsKICAgICAgICAgICAgICAgICJBdXRob3JpemF0aW9uIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXBsb2FkQWN0aW9uOiBjb25maWcuQVBJX1VSTCArICcvdXBsb2FkJywKICAgICAgICAgICAgd29ya2VyOiB7CiAgICAgICAgICAgICAgICBuaWNrbmFtZTogJycsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgICAgICAgICBwaG9uZTogJycsCiAgICAgICAgICAgICAgICBnZW5kZXI6ICcnLAogICAgICAgICAgICAgICAgYXZhdGFyOiAnJywKICAgICAgICAgICAgICAgIGRlcGFydG1lbnQ6ICcnLAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICBtb3VudGVkKCkgewogICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicm9sZSIpID09PSAnd29ya2VyJykgewogICAgICAgICAgICBGaW5kV29ya2VyQnlJZChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgid2lkIikpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIHRoaXMud29ya2VyID0gcmVzLmRhdGE7CiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfSwKCiAgICBtZXRob2RzOiB7CgogICAgICAgIG9uU3VibWl0KCkgewogICAgICAgICAgICBVcGRhdGVXb3JrZXIodGhpcy53b3JrZXIpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICflkZjlt6Xln7rmnKzkv6Hmga/mm7TmlrDmiJDlip8hJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCgogICAgICAgIGhhbmRsZVVwbG9hZFN1Y2Nlc3MocmVzKSB7CiAgICAgICAgICAgIHRoaXMud29ya2VyLmF2YXRhciA9IHJlczsKICAgICAgICAgICAgVXBkYXRlV29ya2VyKHRoaXMud29ya2VyKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5aS05YOP5LiK5Lyg5oiQ5YqfIScKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9CgogICAgfSwKCn0KCg=="},{"version":3,"sources":["Setting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Setting.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"main\">\n        <h3 style=\"letter-spacing: 1px;font-weight: 400;padding-bottom: 20px\">基本设置</h3>\n\n        <div>\n            <el-form style=\"width: 350px;float: left\" label-position=\"top\" ref=\"form\" :model=\"worker\"\n                     label-width=\"80px\">\n                <el-form-item style=\"padding: 0\" label=\"用户名\">\n                    <el-input v-model=\"worker.username\"></el-input>\n                </el-form-item>\n                <el-form-item style=\"padding: 0\" label=\"昵称\">\n                    <el-input v-model=\"worker.nickname\"></el-input>\n                </el-form-item>\n                <el-form-item style=\"padding: 0\" label=\"密码\">\n                    <el-input type=\"password\" v-model=\"worker.password\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"性别\">\n                    <el-radio-group v-model=\"worker.gender\">\n                        <el-radio label=\"男生\"></el-radio>\n                        <el-radio label=\"女生\"></el-radio>\n                    </el-radio-group>\n                </el-form-item>\n                <el-form-item style=\"padding: 0\" label=\"电话号码\">\n                    <el-input v-model=\"worker.phone\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"*入职部门\">\n                    <el-radio-group style=\"width: 600px\" v-model=\"worker.department\">\n                        <el-radio label=\"客服部\"></el-radio>\n                        <el-radio label=\"运营部\"></el-radio>\n                        <el-radio label=\"宣传部\"></el-radio>\n                        <el-radio label=\"策划部\"></el-radio>\n                        <el-radio label=\"人事部\"></el-radio>\n                        <el-radio label=\"监管部\"></el-radio>\n                    </el-radio-group>\n                </el-form-item>\n                <el-form-item style=\"padding-top: 20px\">\n                    <el-button type=\"primary\" @click=\"onSubmit\">更新基本信息</el-button>\n                </el-form-item>\n            </el-form>\n            <div>\n                <img style=\"padding-bottom: 10px;padding-left: 150px;width: 150px; height: 150px;\" alt=\"\"\n                     :src=\"worker.avatar\">\n                <el-upload\n                        style=\"padding-left: 500px;letter-spacing: 1px\"\n                        class=\"upload-demo\"\n                        accept=\".png,.jpg\"\n                        :headers=\"header\"\n                        :action=\"uploadAction\"\n                        :on-success=\"handleUploadSuccess\"\n                        multiple\n                        :limit=\"1\">\n                    <el-button style=\"width: 150px\" size=\"small\" type=\"primary\">\n                        <i class=\"el-icon-upload2\"></i> 点击上传\n                    </el-button>\n                    <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件</div>\n                </el-upload>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import config from \"@/config\";\n    import {FindWorkerById, UpdateWorker} from \"@/api/worker\";\n\n    export default {\n\n        data() {\n            return {\n                header: {\n                    \"Authorization\": localStorage.getItem(\"token\")\n                },\n                uploadAction: config.API_URL + '/upload',\n                worker: {\n                    nickname: '',\n                    password: '',\n                    phone: '',\n                    gender: '',\n                    avatar: '',\n                    department: '',\n                }\n            }\n        },\n\n        mounted() {\n            if (localStorage.getItem(\"role\") === 'worker') {\n                FindWorkerById(localStorage.getItem(\"wid\")).then(res => {\n                    this.worker = res.data;\n                })\n            }\n        },\n\n        methods: {\n\n            onSubmit() {\n                UpdateWorker(this.worker).then(res => {\n                    if (res.success) {\n                        this.$message({\n                            type: 'success',\n                            message: '员工基本信息更新成功!'\n                        });\n                    }\n                })\n            },\n\n            handleUploadSuccess(res) {\n                this.worker.avatar = res;\n                UpdateWorker(this.worker).then(res => {\n                    if (res.success) {\n                        this.$message({\n                            type: 'success',\n                            message: '头像上传成功!'\n                        });\n                    }\n                })\n            }\n\n        },\n\n    }\n\n</script>\n\n<style scoped>\n\n    .main {\n        padding: 50px;\n        height: 800px;\n    }\n\n    >>> .el-form--label-top .el-form-item__label {\n        padding: 0;\n    }\n\n    .el-form-item {\n        margin-bottom: 5px;\n    }\n</style>"]}]}